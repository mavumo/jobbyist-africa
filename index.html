<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Find Your Ideal Job, Hire The Best Talent - Jobbyist South Africa</title>
  <meta name="description" content=
  "Find the most sought-after jobs and hire the best talent with jobbyist.">
  <meta name="author" content="jobbyist">
  <link rel="canonical" href="https://careers.jobbyist.co.za">
  <meta property="og:title" content=
  "Jobbyist | Find jobs and hire top talent in South Africa">
  <meta property="og:description" content=
  "Find the best jobs and hire the best talent.">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Jobbyist">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content=
  "Jobbyist | Find jobs and hire top talent in South Africa">
  <meta name="twitter:description" content=
  "Find the best jobs and hire the best talent.">
  <meta name="viewport" content=
  "minimal-ui, width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" type="text/css" href=
  "https://cdn.niceboard.co/static-app/css/inter.css">
  <link rel="stylesheet" type="text/css" href=
  "https://cdn.niceboard.co/static-app/css/style.css?version=58">
  <style>
                /*User style*/
                                body {
                                        background: #f4f4f4;
                                }
        
                                header {
                                        background: #fff;
                                }
        
                        header .menu li {
                                color: #444;
                        }
        
                        header .menu > li a.active {
                                box-shadow: 0 0 3px rgba(0,0,0,0.4);
                                /*box-shadow: 0 0 1px rgba(0,0,0,1);*/
                                /*border: 1px solid #e4e4e4;*/
                                color: #222;
                        }
        
                        header .menu > li a:not(.active):hover {
                                box-shadow: 0 0 1px rgba(0,0,0,0.7);
                        }
        
                        .logo-link {
                                position: absolute;
                        }
        
                        header .menu.left-menu {
                                position: static;
                                text-align: center;
                        }
        
                        .banner .cover {
                                background: linear-gradient(to bottom, #4e54c8, #8f94fb);
                        }
        
        
        
        
        
                .btn {
                  background: #222;
                  border-color: #222;
                }
        
                .btn:hover {
                  background: #222;
                  border-color: #222;
                }
                .btn.outline {
                  background: transparent;
                  color: #222;
                }
                .btn.outline:not(.no-hover):hover {
                  background: #222;
                  border-color: #222;
                  color: #fff;
                }
        
                .about-section .about-wrap .about-menu .menu-option.active,
                .about-section .about-wrap .about-menu .menu-option.active:hover {
                        color: #222;
                        border-color: #222;
                }
        
                .jobs li:hover > a,
                .companies.list-view .company:hover,
                .seekers .seeker:hover {
                  border-left-color: #222;
                }
        
                footer ul li a:hover,
                footer ul li.powered-by a:hover,
                .locations .location .location-info .list li a:hover {
                        color: #222;
                }
        
                .form-card-options .option.selected, 
                .form-card-options .option.selected:hover {
                        border-color: #222;
                }
        
                header .menu li:not(.post-button) a:hover {
                        /*color: #222;*/
                }
        
        
                                nav {
                                        background: #222;
                                }
        
                        nav .inner ul li {
                                color: #fff;
                        }
        
                                .jobs li.featured, .jobs li.featured:hover,
                                .seekers .seeker.featured, .seekers .seeker.featured:hover {
                                        background: #FFF8BF;
                                }
        
                                .subscribe {
                                        background: #111;
                                }
        
                        .subscribe {
                                color: #fff;
                        }
        
                        .subscribe:before {
                                background: url(https://cdn.niceboard.co/static-app/img/icon-bell-fff.png);
                                background-size: 100%;
                        }
        
                        .subscribe .subscribe-frequency input:checked + label {
                                color: #fff;
                                border-color: #fff;
                        }
        
                        .subscribe [type="submit"] {
                                color: #fff !important;
                                border-color: #fff !important;
                        }
  </style>
  <script src=
  "https://cdn.niceboard.co/static-app/js/jquery-3.4.1.min.js"></script>
  <script src=
  "https://cdn.niceboard.co/static-app/js/vue.min.js"></script>
  <script src=
  "https://cdn.niceboard.co/static-app/js/axios.min.js?version=2"></script>
  <script src=
  "https://cdn.niceboard.co/static-app/js/utils.js?version=10"></script>
  <script async src=
  "https://www.googletagmanager.com/gtag/js?id=G-M2S3QZBL74"></script>
  <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
        
                gtag('config', 'G-M2S3QZBL74');
  </script>
</head>



  
<body data-page="home" data-account="anonymous">
  <header class="dark-text">
    <div class="inner">
      <a href="/" class="logo-link">
      <p class="logo">jobbyist</p></a>
      <ul class="menu left-menu">
        <li>
          <a href="/" class="goto-jobs active">JOBS</a>
        </li>
        <li>
          <a href="/companies" class="">EMPLOYERS</a>
        </li>
        <li>
          <a href="/talent" class="">JOB SEEKERS</a>
        </li>
      </ul>
      <ul class="menu right-menu">
        <li class="user">
          <!-- Job seeker -->
          <ul class="user-menu applicants-menu">
            <li class="separator">JOB SEEKERS</li>
            <li>
              <a href="/seeker/login">Log in</a>
            </li>
            <li>
              <a href="/seeker/signup">Sign up</a>
            </li>
          </ul><!-- Employer -->
          <ul class="user-menu employers-menu">
            <li class="separator">Employers</li>
            <li>
              <a href="/employer/login">Log in</a>
            </li>
            <li>
              <a href="/employer/signup">Sign up</a>
            </li>
          </ul>
        </li>
        <li class="post-button">
          <a href="/post" class="btn medium">Post a job</a>
        </li>
      </ul><button class="hamburger toggle-menu">Menu</button>
      <button class="x toggle-menu hide">Close</button>
    </div>
  </header>
  <nav class="">
    <div class="inner">
      <ul>
        <li><span class="mobile-only"><a href="/" class=
        "goto-jobs">Jobs</a></span></li>
        <li><span class="mobile-only"><a href="/companies" class=
        "">Companies</a></span></li>
        <li><span class="mobile-only"><a href="/talent" class=
        "">Talent</a></span></li>
        <li class="post-button"><span class="mobile-only"><a href=
        "/post" class="btn medium">Post a job</a></span></li>
      </ul>
    </div>
  </nav>
  <main class="box cf" id="app">
    <div class="banner home">
      <div class="cover"></div>
      <div class="inner">
        <h1 class="title bold">Find jobs and hire top talent in South Africa</h1>
        <h2 class="subtitle">Find the best jobs and hire the best
        talent.</h2>
        <div class="buttons mobile-only">
          <a class="btn large outline goto-jobs" href="/">Find a
          job</a> <a class="btn large" href="/post">Post a job</a>
        </div>
      </div>
    </div>
    <div class="board cf">
      <div class="section direction-boxes hide-mobile">
        <div class="direction-box employer">
          <p class="title">Employers</p>
          <p class="text">Post open jobs and hire top talent.</p>
          <p class="action-btns"><a href="/post" class=
          "btn medium">Post a job</a> <a href="/employer/signup"
          class="btn medium outline">Sign up</a></p>
        </div>
        <div class="direction-box applicant">
          <p class="title">Job seekers</p>
          <p class="text">Create a profile and get hired by top
          employers.</p>
          <p class="action-btns"><a href="/seeker/signup" class=
          "btn medium outline">Submit resume</a> <a href="/" class=
          "btn medium outline goto-jobs">Find jobs</a></p>
        </div>
      </div>

      
      <div class="section">
        <div class="inner">
          <div class="section-title-wrap">
            <p class="section-title">Featured companies</p>
          </div>
          <div class="companies card-view">
            <a href="/company/twitter" class="company">
            <div class="company-info cf">
              <img src=
              "https://cdn.niceboard.co/assets/_default/twitter.png"
              alt="Twitter logo" class="company-logo">
              <p class="company-name">Twitter</p>
              <p class="company-tagline">The world in real time</p>
              <p class="company-jobs"><span>4 jobs</span></p>
            </div></a> <a href="/company/apple" class="company">
            <div class="company-info cf">
              <img src=
              "https://cdn.niceboard.co/assets/_default/apple.png"
              alt="Apple logo" class="company-logo">
              <p class="company-name">Apple</p>
              <p class="company-tagline">Think different</p>
              <p class="company-jobs"><span>3 jobs</span></p>
            </div></a> <a href="/company/square" class="company">
            <div class="company-info cf">
              <img src=
              "https://cdn.niceboard.co/assets/_default/square.png"
              alt="Square logo" class="company-logo">
              <p class="company-name">Square</p>
              <p class="company-tagline">Powering payments for
              small businesses</p>
              <p class="company-jobs"><span>3 jobs</span></p>
            </div></a>
          </div>
          <div class="load-more">
            <a class="btn medium outline load-more-btn" href=
            "/companies">View all companies</a>
          </div>
        </div>
      </div>


      <!---
      <div class="section jobs-section" id="jobs">
        <div class="section-title-wrap">
          <h3 class="section-title">New jobs <span class=
          "count">{{total_jobs_count}}</span></h3>
          <p class="pagination-info">{{pagination_label}}</p>
        </div>



        
        <div class="jobs-box dual-pane cf">
          <div class="overlay filters-overlay">
            <div class="filters" id="filters">
              <div class="component mobile-only mobile-fixed">
                <button class="btn close-filters-btn">Apply
                filters</button>
              </div>
              <div class="component">
                <p class="filter-label">Keywords</p>
                <div class="filter-box">
                  <input type="text" name="search" class="search"
                  placeholder="Company, title..." v-model=
                  "filters.keyword">
                </div>
              </div>
              <div class="component" v-if=
              "countries.length || states.length || cities.length || remote_count > 0 || remote_only_count > 0 || location_filter_set || remote_filter_set || remoteonly_filter_set">
                <p class="filter-label">Location</p>
                <div class="subcomponent" v-if=
                "countries.length || states.length || cities.length || location_filter_set">
                  <div class="filter-box">
                    <div class="select-wrap">
                      <label for="city-select" class=
                      "select-label">{{filters_labels.city}}</label>
                      <select name="city" v-model="filters.city"
                      id="city-select" class="hide">
                        <option value="all">
                          All cities
                        </option>
                        <option v-for="c in cities">
                          {{c.name}} ({{c.count}})
                        </option>
                      </select>
                    </div>
                    <div class="select-wrap">
                      <label for="state-select" class=
                      "select-label">{{filters_labels.state}}</label>
                      <select name="state" v-model="filters.state"
                      id="state-select" class="hide">
                        <option value="all">
                          All states
                        </option>
                        <option v-for="s in states">
                          {{s.name}} ({{s.count}})
                        </option>
                      </select>
                    </div>
                    <div class="select-wrap">
                      <label for="country-select" class=
                      "select-label">{{filters_labels.country}}</label>
                      <select name="country" v-model=
                      "filters.country" id="country-select" class=
                      "hide">
                        <option value="all">
                          All countries
                        </option>
                        <option v-for="c in countries">
                          {{c.name}} ({{c.count}})
                        </option>
                      </select>
                    </div>
                    <!-- <input type="text" id="location" name="location" class="search" placeholder="Search cities..." v-model="filters.location"> -->
                  </div>
                </div>
                <div class="subcomponent" v-if=
                "remote_count > 0 || remote_filter_set">
                  <p class="filter-label filter-box-only">Remote
                  OK</p>
                  <div class="filter-box">
                    <label class="switch"><input type="checkbox"
                    id="remote" name="remote" v-model=
                    "filters.remote_ok"> <span class=
                    "switch-label">Remote OK</span></label>
                  </div>
                </div>
                <div class="subcomponent" v-if=
                "remote_only_count > 0 || remoteonly_filter_set">
                  <p class="filter-label filter-box-only">Remote
                  only</p>
                  <div class="filter-box">
                    <label class="switch"><input type="checkbox"
                    id="remote" name="remote" v-model=
                    "filters.remote_only"> <span class=
                    "switch-label">Remote only</span></label>
                  </div>
                </div>
              </div>
              <div class="component" v-if=
              "categories.length || category_filter_set">
                <p class="filter-label">Job Category</p>
                <div class="filter-box">
                  <div class="select-wrap">
                    <label for="category-select" class=
                    "select-label">{{filters_labels.category}}</label>
                    <select name="jobcategory" v-model=
                    "filters.category" id="category-select" class=
                    "hide">
                      <option value="all">
                        All categories
                      </option>
                      <option v-for="c in categories">
                        {{getTranslatedLabel(c)}} ({{c.count}})
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="component" v-if=
              "secondary_categories.length || secondary_category_filter_set">
                <p class="filter-label">Job Secondary Category</p>
                <div class="filter-box">
                  <div class="select-wrap">
                    <label for="secondary-category-select" class=
                    "select-label">{{filters_labels.secondary_category}}</label>
                    <select name="jobsecondarycategory" v-model=
                    "filters.secondary_category" id=
                    "secondary-category-select" class="hide">
                      <option value="all">
                        All categories
                      </option>
                      <option v-for="c in secondary_categories">
                        {{getTranslatedLabel(c)}} ({{c.count}})
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="component" v-if=
              "tags.length || tags_filter_set">
                <p class="filter-label">Job Tags</p>
                <div class="filter-box">
                  <div class="checkbox-wrap">
                    <span class="checkbox-option" v-for=
                    "t in tags"><input type="checkbox" v-bind:id=
                    "'tag-' + t.slug" name="tags">
                    <label v-bind:for=
                    "'tag-' + t.slug">{{getTranslatedLabel(t)}}
                    ({{t.count}})</label></span>
                  </div>
                </div>
              </div>
              <div class="component" v-if=
              "jobtypes.length || jobtype_filter_set">
                <p class="filter-label">Job Type</p>
                <div class="filter-box">
                  <div class="select-wrap">
                    <label for="jobtype-select" class=
                    "select-label">{{filters_labels.jobtype}}</label>
                    <select name="jobtype" v-model=
                    "filters.jobtype" class="hide" id=
                    "jobtype-select">
                      <option value="all">
                        All jobs
                      </option>
                      <option v-for="j in jobtypes">
                        {{getTranslatedLabel(j)}} ({{j.count}})
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="component" v-if=
              "salaries.length || salary_filter_set">
                <p class="filter-label">Salary</p>
                <div class="filter-box">
                  <div class="subcomponent cf">
                    <input type="number" min="0" step="10" name=
                    "salary_min" class="salary min" v-model=
                    "filters.salary_min" placeholder="Min">
                    <input type="number" min="0" step="10" name=
                    "salary_max" class="salary max" v-model=
                    "filters.salary_max" placeholder="Max">
                  </div>
                  <div class="subcomponent">
                    <div class="select-wrap">
                      <label for="salary_timeframe" class=
                      "select-label">{{filters_labels.salary_timeframe}}</label>
                      <select name="salary_timeframe" v-model=
                      "filters.salary_timeframe" class="hide" id=
                      "salary_timeframe">
                        <option value="" disabled>
                          Select timeframe
                        </option>
                        <option v-for="s in salaries">
                          {{s.name}} ({{s.count}})
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="component" v-if=
              "filters_set_count > 1">
                <button class=
                "clear-filters-btn btn medium outline">Clear all
                filters</button>
              </div>
            </div>
          </div>
          <div class="jobs-list cf">
            <button class="open-filters-btn">Filter jobs
            <span class="count" v-if=
            "filters_set">{{filters_set_count}}
            active</span></button>
            <ul class="jobs cf" v-if=
            "jobs.length && !backfill_merge_hide_jobs">
              <li v-for="(job, index) in jobs" v-bind:key="job.id"
              v-bind:class=
              "{featured: job.is_featured, saved: job.is_saved, selected: job.id == selected_job_id}">
                <a v-bind:href="job | getJobLink" v-if=
                "job.id != 0">
                <div class="post">
                  <div class="company-logo" v-if=
                  "!job.anonymity_enabled">
                    <img v-bind:src="job.company_logo" v-if=
                    "job.company_logo"> <span v-else=
                    "">{{job.company_name.slice(0, 1)}}</span>
                  </div>
                  <div class="company-logo" v-else="">
                    <span>?</span>
                  </div>
                  <!-- <span class="looking-for">is hiring a</span>  -->
                  <span class="position">{{job.title}}</span>
                  <span class="company" v-if=
                  "!job.anonymity_enabled">{{job.company_name}}</span>
                  <span class="company" v-else="">Private
                  Employer</span>
                </div>
                <div class="meta">
                  <span class="location" v-if=
                  "job.location_name || job.is_remote"><span class=
                  "city" v-if=
                  "job.location_name && !job.remote_only">{{job.location_name}}</span><span class="city"
                  v-if=
                  "job.remote_only && !job.remote_required_location">Anywhere</span><span class="city"
                  v-if=
                  "job.remote_only && job.remote_required_location">{{job.remote_required_location}}</span></span>
                  <template v-if="job.remote_only">
                    <span class="remote" v-if=
                    "job.is_remote">Remote only</span>
                  </template>
                  <template v-else="">
                    <span class="remote" v-if=
                    "job.is_remote">Remote</span>
                  </template><span class="remote" v-if=
                  "job.is_remote"><span class="requirements" v-if=
                  "job.remote_required_location && !job.remote_only">{{job.remote_required_location}}</span></span>
                  <span class="involvement" v-if=
                  "job.jobtype">{{getTranslatedLabel(job.jobtype)}}</span>
                  <span class="salary" v-if=
                  "job.salary_min || job.salary_max">{{formatSalary(job.salary_min,
                  job.salary_max, job.salary_currency)}}
                  {{formatSalaryTimeframe(job.salary_timeframe)}}</span>
                  <div class="tags" v-if="job.tags">
                    <span class="tag" v-for=
                    "(tag, index) in job.tags" v-bind:key=
                    "tag.id">{{getTranslatedLabel(tag)}}</span>
                  </div><span class="timeago" v-if=
                  "!job.expires_soon">{{job.timeago}}</span>
                  <span class="expires-soon" v-if=
                  "job.expires_soon">Expires soon</span>
                </div>
                <div class="action-btns" v-show=
                "seeker_accounts_enabled">
                  <button type="button" class="save-job">Save
                  job</button>
                </div>
                <!-- <p class="description" v-if="job.description && false">{{job.description}}</p> -->
                <!-- <span class="btn apply-btn" v-if="false">View job</span> --></a>
                <div class="company-card" v-if=
                "!job.anonymity_enabled">
                  <p class="company-name"><a v-bind:href=
                  "job | getCompanyLink">{{job.company_name}}</a></p>
                  <p class="company-tagline" v-if=
                  "job.company_tagline">{{job.company_tagline}}</p>
                  <p class="company-links" v-if=
                  "job.company_website || job.company_twitter">
                  <a v-bind:href="job.company_website" class=
                  "website" v-if="job.company_website" target=
                  "_blank">Website</a> <a v-bind:href=
                  "job.company_twitter" class="twitter" v-if=
                  "job.company_twitter" target=
                  "_blank">Twitter</a></p>
                </div>
              </li>
            </ul>
            <template v-if=
            "backfill_merge_backfill_jobs && backfill_merge_backfill_jobs.length">
              <p class="jobs-separator">Jobs from our partners</p>
              <ul class="jobs cf">
                <li v-for=
                "(job, index) in backfill_merge_backfill_jobs"
                v-bind:key="job.id">
                  <a target="_blank">
                  <div class="post">
                    <div class="company-logo">
                      <img v-bind:src="job.company_logo" v-if=
                      "job.company_logo"> <span v-else=
                      "">{{job.company_name.slice(0, 1)}}</span>
                    </div>
                    <!-- <span class="looking-for">is hiring a</span>  -->
                    <span class="position">{{job.title}}</span>
                    <span class=
                    "company">{{job.company_name}}</span>
                  </div>
                  <div class="meta">
                    <span class="location" v-if=
                    "job.location_name || job.is_remote"><span class="city">
                    {{job.location_name}} <span class="remote"
                    v-if="job.is_remote">Remote</span></span></span>
                    <span class="involvement" v-if=
                    "job.jobtype">{{job.jobtype}}</span>
                    <span class="timeago">{{job.timeago}}</span>
                    <span class="salary" v-if=
                    "job.salary_min || job.salary_max">{{formatSalary(job.salary_min,
                    job.salary_max)}}</span>
                  </div>
                  <p class="description" v-if=
                  "job.description && false">
                  {{job.description}}</p><span class=
                  "btn apply-btn" v-if="false">View job</span></a>
                </li>
              </ul>
            </template>
            <div class="jobs-placeholder" v-if=
            "!jobs.length && (!backfill_merge_enabled || !backfill_merge_backfill_jobs.length)">
              <p v-if="!jobs_loading">No jobs were found.</p>
              <p v-if="jobs_loading">Loading...</p>
            </div>
            <div class="subscribe-wrap" id="subscribe">
              <form class="subscribe">
                <p class="subscribe-text" v-if=
                "!jobalerts.submitted">Get the newest jobs in your
                inbox</p>
                <template v-else="">
                  <template v-if="jobalerts.server_error">
                    <p class="subscribe-text">Something went wrong.
                    Please try again later.</p>
                  </template>
                  <template v-else="">
                    <p class="subscribe-text" v-if=
                    "jobalerts.email_exists">You have already
                    subscribed!</p>
                    <p class="subscribe-text" v-else="">We added
                    you to the mailing list!</p>
                  </template>
                </template>
                <div class="subscribe-frequency">
                  <input type="radio" name="frequency" id=
                  "frequency-weekly" v-model="jobalerts.frequency"
                  value="weekly"> <label for=
                  "frequency-weekly">Weekly</label> <input type=
                  "radio" name="frequency" id="frequency-2xweek"
                  v-model="jobalerts.frequency" value="2xweek">
                  <label for="frequency-2xweek">2x / Week</label>
                </div>
                <div class="subscribe-filters">
                  <div class="component">
                    <div class="select-wrap">
                      <label for="jobtype-select-subscribe" class=
                      "select-label">{{jobalerts_labels.jobtype}}</label>
                      <select v-model="jobalerts.jobtype" class=
                      "hide" id="jobtype-select-subscribe">
                        <option value="all">
                          All jobs
                        </option>
                        <option v-for="j in jobalerts.jobtypes">
                          {{getTranslatedLabel(j)}}
                        </option>
                      </select>
                    </div>
                  </div>




                  <div class="component">
                    <div class="select-wrap">
                      <label for="location-select-subscribe" class=
                      "select-label">{{jobalerts_labels.location}}</label>
                      <select v-model="jobalerts.location" id=
                      "location-select-subscribe" class="hide">
                        <option value="all">
                          All locations
                        </option>
                        <option value="remote">
                          Remote
                        </option>
                        <option v-for="l in jobalerts.locations">
                          {{l.name}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="component" v-if=
                  "jobalerts.categories.length">
                    <div class="select-wrap">
                      <label for="category-select-subscribe" class=
                      "select-label">{{jobalerts_labels.category}}</label>
                      <select v-model="jobalerts.category" id=
                      "category-select-subscribe" class="hide">
                        <option value="all">
                          All categories
                        </option>
                        <option v-for="c in jobalerts.categories">
                          {{getTranslatedLabel(c)}}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="subscribe-input">
                  <input type="text" name="email" id="subscribe"
                  placeholder="email@example.com" value="" v-model=
                  "jobalerts.email" v-bind:class=
                  "{error: jobalerts.error}" v-bind:disabled=
                  "jobalerts.loading"> <input type="text" name=
                  "other" placeholder="Do not fill." value=""
                  class="other" v-model="jobalerts.other">
                  <div class="btn-loader" v-if="jobalerts.loading">
                  </div><button type="submit" class=
                  "btn"><span v-else="">Subscribe</span></button>
                </div>
                <p class="subscribe-info">No spam ever! Unsubscribe
                at any time.</p>
              </form>
            </div>
            <div class="load-more pagination" v-if=
            "hasNext || hasPrev">
              <button class="btn large outline load-more-btn"
              v-bind:disabled="jobs_loading" v-if=
              "hasPrev"><span v-show=
              "jobs_loading">Loading...</span> <span v-show=
              "!jobs_loading">Prev page</span></button>
              <button class="btn large outline load-more-btn"
              v-bind:disabled="jobs_loading" v-if=
              "hasNext"><span v-show=
              "jobs_loading">Loading...</span> <span v-show=
              "!jobs_loading">Next page</span></button>
            </div>
          </div>
          <div class="job-pane cf" id="job-pane" v-if=
          "jobs.length && !backfill_merge_hide_jobs">
            <div class="job-wrap job-box" v-if="job.id"></div>
          </div>
        </div>
      </div>




      <div class="section">
        <div class="inner">
          <div class="section-title-wrap">
            <p class="section-title">Browse jobs by...</p>
          </div>
          <div class="locations">
            <div class="location">
              <div class="location-info">
                <p class="location-title">Job Type</p>
                <ul class="list">
                  <li>
                    <a href="/place/remote" class="city">Remote</a>
                  </li>
                  <li>
                    <a href="/place/city/new-york-ny-usa">New
                    York</a>
                  </li>
                  <li>
                    <a href="/place/city/los-angeles-ca-usa">Los
                    Angeles</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="location">
              <div class="location-info">
                <p class="location-title">Industry</p>
                <ul class="list">
                  <li>
                    <a href=
                    "/place/state/california">California</a>
                  </li>
                  <li>
                    <a href="/place/state/new-york">New York</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="location">
              <div class="location-info">
                <p class="location-title">Region/Country</p>
                <ul class="list">
                  <li>
                    <a href="/place/country/united-states">United
                    States</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="load-more">
            <a class="btn medium outline load-more-btn" href=
            "/places">View all locations</a>
          </div>
        </div>
      </div>



    
    </div>
    <div class="notification" v-bind:class=
    "{show: notification.show, hide: notification.hide}">
      <p>{{notification.msg}}</p>
    </div>
    <div class="overlay employer-overlay">
      <div class="popup seeker-popup seeker">
        <div class="popup-close"></div>
        <div class="popup-inner">
          <div class="seeker-info">
            <div class="seeker-details simple">
              <div class="seeker-row" v-for=
              "field in company.custom_fields">
                <label class="label">{{field.label}}</label>
                <p class="info-holder" v-if=
                "field.type == 'checkbox'">
                {{field.value|getBooleanValue}}</p>
                <p class="info-holder" v-else=""></p>
                <template v-if="field.validation_type">
                  <a v-if="field.validation_type == 'url'" target=
                  "_blank">{{field.value}}</a> <a v-if=
                  "field.validation_type == 'email'">{{field.value}}</a>
                </template>
                <template v-else="">
                  {{field.value}}
                </template>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main><!-- Job template -->
  <script type="text/template" id="fulljob-template">
        <div class="job-box cf" :class="{locked: jobview_restricted}">
                <!-- Non-restricted job -->
                <div class="job-info">
                        <h1 class="title">{{job.title}}</h1>

                        <div class="company-wrap">
                                <div class="company-logo">
                                        <template v-if="!job.company.anonymity_enabled">
                                                <img v-if="job.company.logo_url" v-bind:src="job.company.logo_url" :alt="job.company.name + ' logo'" @error="job.company.logo_url = null;">
                                                <span v-else class="company-logo-placeholder">{{job.company.name.slice(0, 1)}}</span>
                                        </template>
                                        <template v-else>
                                                <span v-else class="company-logo-placeholder">?</span>
                                        </template>
                                        </a>
                                </div>

                                <p class="company" v-if="!job.company.anonymity_enabled"><a :href="getCompanyLink(job)">{{job.company.name}}</a></p>
                                <p class="company" v-else>Private Employer</p>
                        </div>

                        <div class="meta">
                                <p class="location" v-if="job.location_name || job.is_remote">
                                        <span class="city" v-if="job.location_name && !job.remote_only">{{job.location_name}}</span>

                                        <template v-if="job.remote_only">
                                        <span v-if="!job.remote_required_location" class="city">Anywhere</span><span v-else class="city">{{job.remote_required_location}}</span>
                                        </template>

                                        <span v-if="job.is_remote" class="remote" :class="{hasrequirements: job.remote_required_location && !job.remote_only}"><template v-if="!job.remote_only">Remote</template><template v-else>Remote only</template> <span class="requirements" v-if="job.remote_required_location && !job.remote_only">{{job.remote_required_location}}</span></span></span>
                                </p>

                                <p class="type" v-if="job.jobtype">{{getTranslatedLabel(job.jobtype)}}</p>

                                <p class="salary" v-if="job.salary_min || job.salary_max">{{formatSalary(job.salary_min, job.salary_max, job.salary_currency)}} {{formatSalaryTimeframe(job.salary_timeframe)}}</p>

                                <p class="category" v-if="job.category">
                                        <a :href="getCategoryLink(job)">{{getTranslatedLabel(job.category)}}</a> <template v-if="job.secondary_category"> / {{getTranslatedLabel(job.secondary_category)}}</template>
                                </p>

                                <p class="tags" v-if="job.tags">
                                        <a v-for="t in job.tags" :href="getTagLink(t)" class="tag">{{getTranslatedLabel(t)}}</a>
                                </p>

                                <div class="extra-fields">
                                        <div v-for="field in job.custom_fields" class="extra-field">
                                                <label class="label">{{field.label}}</label>
                                                <p class="value" v-if="field.type == 'checkbox'">{{field.value|getBooleanValue}}</p>
                                                <p class="value" :class="{multiline: field.type == 'textarea'}" v-else>
                                                        <template v-if="field.validation_type">
                                                                <a v-if="field.validation_type == 'url'" :href="field.value" target="_blank">{{field.value}}</a>
                                                                <a v-if="field.validation_type == 'email'" :href="'mailto:' + field.value">{{field.value}}</a>
                                                        </template>
                                                        <template v-else>
                                                                <span v-if="field.value">{{field.value}}</span>
                                                                <span v-else>-</span>
                                                        </template>
                                                </p>
                                        </div>
                                </div>

                                <p class="posted-at" v-if="!job.expires_soon">{{job.timeago}}</p>
                                <p class="expires-soon" v-if="job.expires_soon">Expires soon</p>
                        </div>

                        <div class="buttons" v-if="!jobview_restricted && !job.is_expired && !job.is_filled">
                                <button v-if="job.apply_by_form" type="button" class="btn large" @click="applyDirect">
                                        <span v-show="view =='job'">Apply to this job</span>
                                        <span v-show="view == 'login'">Back to job</span>
                                </button>

                                <a v-if="job.apply_url" :href="getApplyUrl(job)" class="btn large" target="_blank" @click="applyExternal('link', $event)">
                                        <span v-show="view =='job'">Apply for this position</span>
                                        <span v-show="view == 'login'">Back to job</span>
                                </a>

                                <a v-if="job.apply_email" :href="getApplyEmail(job)" class="btn large apply-email-click" @click="applyExternal('email', $event)">
                                        <span v-show="view =='job'">Apply for this position</span>
                                        <span v-show="view == 'login'">Back to job</span>
                                </a>

                                <button v-if="jobseeker_accounts_enabled" type="button" class="btn large white save-job" :class="{saved: job.is_saved}" @click="toggleSave">
                                        <span v-if="job.is_saved">Saved</span>
                                        <span v-else>Save</span>
                                </button>

                                <div class="button-box">
                                        <button type="button" class="btn large white share-job">Share this job</button>

                                        <div class="share-buttons cf">
                                                <a target="_blank" :href="getShareLink(job, 'twitter')" class="share-button twitter" title="X">Tweet</a>
                                                <a target="_blank" :href="getShareLink(job, 'facebook')" class="share-button facebook" title="Facebook">Share</a>
                                                <a target="_blank" :href="getShareLink(job, 'linkedin')" class="share-button linkedin" title="LinkedIn">Share</a>
                                                <a target="_blank" :href="getShareLink(job, 'email')" class="share-button email" title="Email">Share</a>
                                                <button :data-href="getShareLink(job, 'copy')" class="share-button copy" title="Copy">Share</a>
                                        </div>
                                </div>
                        </div>

                        <p class="expired-notification" v-if="job.is_expired || job.is_filled">This job is no longer accepting applications.</p>
                </div>

                <template v-if="!jobview_restricted">
                        <div class="description-wrap" v-if="view == 'job'">
                                <div v-if="job.description_html" class="description" v-html="job.description_html">
                                </div>

                                <template v-if="!job.is_expired && !job.is_filled">
                                        <div class="buttons" :class="{'no-description': !job.description_html}">
                                                <button v-if="job.apply_by_form" type="button" class="btn large" @click="applyDirect">
                                                        <span v-show="view =='job'">Apply to this job</span>
                                                        <span v-show="view == 'login'">Back to job</span>
                                                </button>

                                                <a v-if="job.apply_url" :href="getApplyUrl(job)" class="btn large" target="_blank" @click="applyExternal('link', $event)">
                                                        <span v-show="view =='job'">Apply for this position</span>
                                                        <span v-show="view == 'login'">Back to job</span>
                                                </a>

                                                <a v-if="job.apply_email" :href="getApplyEmail(job)" class="btn large apply-email-click" @click="applyExternal('email', $event)">
                                                        <span v-show="view =='job'">Apply for this position</span>
                                                        <span v-show="view == 'login'">Back to job</span>
                                                </a>

                                                <button v-if="jobseeker_accounts_enabled" type="button" class="btn large white save-job" :class="{saved: job.is_saved}" @click="toggleSave">
                                                        <span v-if="job.is_saved">Saved</span>
                                                        <span v-else>Save</span>
                                                </button>

                                                <div class="button-box">
                                                        <button type="button" class="btn large white share-job">Share this job</button>

                                                        <div class="share-buttons cf">
                                                                <a target="_blank" :href="getShareLink(job, 'twitter')" class="share-button twitter" title="X">Tweet</a>
                                                                <a target="_blank" :href="getShareLink(job, 'facebook')" class="share-button facebook" title="Facebook">Share</a>
                                                                <a target="_blank" :href="getShareLink(job, 'linkedin')" class="share-button linkedin" title="LinkedIn">Share</a>
                                                                <a target="_blank" :href="getShareLink(job, 'email')" class="share-button email" title="Email">Share</a>
                                                                <button :data-href="getShareLink(job, 'copy')" class="share-button copy" title="Copy">Share</a>
                                                        </div>
                                                </div>
                                        </div>
                                </template>
                        </div>

                        <div v-if="view == 'login'">
                                <div class="row success">You must be logged in to apply to this job.</div>
                                <div class="success-btns">
                                        <a href="/seeker/login?next=" class="btn large outline">Log in</a>
                                        <a href="/seeker/signup?next=" class="btn large outline">Sign up</a>
                                </div>
                        </div>
                </template>

                <div class="required-login" v-else>
                        <span class="msg-icon lock"></span>
                        <p class="msg bold">This job is restricted to members.</p>
                        <p class="msg">Please log in or create an account to view and apply.</p>

                        <div class="btns">
                                <a :href="getSeekerLoginUrl(job)" class="btn large outline">Log in</a>
                                <a href="/seeker/signup" class="btn large outline">Sign up</a>
                        </div>
                </div>

                <div class="overlay apply-overlay" :class="{active: apply_popup.overlay}" @click="closeApplyPopup">
                        <div class="popup form large apply-popup" @click="stopPropagation" :class="{active: apply_popup.show}">
                                <div class="popup-close" @click="closeApplyPopup"></div>
                                <div class="popup-inner">
                                        <div class="head cf">
                                                <div class="inner">
                                                        <h1 class="title bold">Apply</h1>
                                                </div>
                                        </div>

                                        <div class="popup-form">
                                                <p v-if="application_success" class="row success">Your application has been successfully submitted.</p>

                                                <p class="row error" v-if="!errors.api_call_failed && invalidForm">Please fix the errors below and resubmit.</p>
                                                <p class="row error" v-if="errors.api_call_failed">
                                                Something went wrong. Please try again later or contact us.</p>

                                                <template>
                                                        <p class="row separator"><span>Personal Information</span></p>

                                                        <div class="row cf">
                                                                <p class="half">
                                                                        <label for="apply_firstname" class="label inset">First name <span class="required">*</span></label>
                                                                        <input id="apply_firstname" type="text" v-model="form.first_name" :class="{error: errors.first_name}" />
                                                                </p>

                                                                <p class="half">
                                                                        <label for="apply_lastname" class="label inset">Last name <span class="required">*</span></label>
                                                                        <input type="text" id="apply_lastname" v-model="form.last_name" :class="{error: errors.last_name}"/>
                                                                </p>
                                                        </div>

                                                        <p class="row">
                                                                <label for="apply_email" class="label inset">Email <span class="required">*</span></label>
                                                                <input type="text" id="apply_email" v-model="form.email"  :class="{error: errors.email}"/>
                                                        </p>

                                                        <p class="row">
                                                                <label for="apply_address" class="label inset">Address <span class="optional-badge" v-if="!jobapplication_address_required">Optional</span><span class="required" v-else>*</span></label>
                                                                <input type="text" id="address" v-model="form.address" :class="{error: errors.address}"/>
                                                        </p>

                                                        <p class="row">
                                                                <label for="apply_linkedin" class="label inset">LinkedIn profile <span class="optional-badge" v-if="!jobapplication_linkedin_required">Optional</span><span class="required" v-else>*</span></label>
                                                                <input type="text" id="apply_linkedin" v-model="form.linkedin" :class="{error: errors.linkedin}"/>
                                                        </p>

                                                        <p class="row separator"><span>Profile</span></p>

                                                        <div class="row form" data-field="resume"> 
                                                                <span class="label">Resume </span>
                                                                <div v-if="form.resume">
                                                                        <p class="selected-file-label">{{form.resume.name}}</p>
                                                                        <button type="button" class="btn outline medium" @click="clearResume">Remove</button>
                                                                </div>
                                                                <div v-else-if="form.resume_url">
                                                                        <a :href="form.resume_url" target="_blank" class="selected-file-label">View resume</a>
                                                                        <button type="button" class="btn outline medium" @click="clearResume">Or use another</button>
                                                                </div>
                                                                <div v-else>
                                                                        <div class="dropzone" :class="{error: errors.resume, active: resume_dragging}"
                                                                                @dragenter="resume_dragging=true;"
                                                                                @dragleave="resume_dragging=false;"
                                                                                @drop="resume_dragging=false;">
                                                                                <label for="resume">Upload my resume or drop file here</label>
                                                                                <input type="file" class="show" id="resume" @change="handleResume" accept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
                                                                        </div>
                                                                </div>
                                                        </div>

                                                        <p class="row">
                                                                <label for="apply_summary" class="label inset">Short bio <span class="optional-badge" v-if="!jobapplication_summary_required">Optional</span><span class="required" v-else>*</span></label>
                                                                <textarea id="apply_summary" v-model="form.summary" :class="{error: errors.summary}"></textarea>
                                                        </p>

                                                        <p class="row separator"><span>Details</span></p>

                                                        <p class="row">
                                                                <label for="apply_cover" class="label inset">Cover letter <span class="optional-badge" v-if="!jobapplication_coverletter_required">Optional</span><span class="required" v-else>*</span></label>
                                                                <textarea id="apply_cover" v-model="form.cover_letter" :class="{error: errors.cover_letter}"></textarea>
                                                        </p>

                                                        <template v-if="is_pro_plus && apply_custom_fields && apply_custom_fields.length">
                                                                <p class="row separator"><span>Additional fields</span></p>

                                                                <p class="row" v-for="(field, index) in apply_custom_fields">
                                                                        <template v-if="field.type == 'textinput'">
                                                                                <label :for="'custom-' + field.slug" class="label inset">{{field.label}} <span v-if="!field.is_required" class="optional-badge">Optional</span><span v-else class="required">*</span></label>
                                                                                <input :id="'custom-' + field.slug" type="text" :name="'custom-' + field.slug" v-model="form.apply_custom_fields[field.slug].value"  :class="{error: errors.apply_custom_fields[field.slug]}" />
                                                                        </template>
                                                                        <template v-if="field.type == 'textarea'">
                                                                                <label :for="'custom-' + field.slug" class="label inset">{{field.label}} <span v-if="!field.is_required" class="optional-badge">Optional</span><span v-else class="required">*</span></label>
                                                                                <textarea :id="'custom-' + field.slug"  :name="'custom-' + field.slug" v-model="form.apply_custom_fields[field.slug].value" :class="{error: errors.apply_custom_fields[field.slug]}"></textarea>
                                                                        </template>
                                                                        <template v-if="field.type == 'checkbox'">
                                                                                <p class="label inset">{{field.label}}</p>
                                                                                <input type="checkbox" :id="'custom-' + field.slug" :name="'custom-' + field.slug" value="true" v-model="form.apply_custom_fields[field.slug].value">
                                                                                <label :for="'custom-' + field.slug" class="no-select">{{field.checkbox_label}}</label>
                                                                        </template>

                                                                        <template v-if="field.type == 'select'">
                                                                                <label :for="'custom-' + field.slug" class="label">{{field.label}}</label>

                                                                                <select :id="'custom-' + field.slug" :name="'custom-' + field.slug" v-model="form.apply_custom_fields[field.slug].value" :class="{error: errors.apply_custom_fields[field.slug]}">
                                                                                        <option v-for="(opt, i) in field.select_options" v-bind:value="opt.name">{{opt.name}}</option>
                                                                                </select>
                                                                        </template>
                                                                </p>
                                                        </template>

                                                        <p class="row">
                                                                <button type="submit" @click="submitApplication" class="btn large full-width fixed-height" :disabled="loading">
                                                                        <span v-if="!loading">Submit application</span>
                                                                        <div v-else class="btn-loader">
                                                                                <div></div>
                                                                                <div></div>
                                                                                <div></div>
                                                                        </div>
                                                                </button>
                                                        </p>
                                                </template>
                                        </div>
                                </div>
                        </div>
                </div>
        </div>
  </script> <!-- Job component -->
  <script>

        var jobboard_id = "3570";
        var jobboard_currency = "ZAR";
        var is_pro_plus = "true" == "true";
        var user_is_logged = "" ? true : false;
        var jobseeker_accounts_enabled = "true" == "true";
        var login_required_to_apply = "true" == "true";
        var jobview_restricted = "" == "true";
        var is_default_translation = "true" == "true";

        var brToNewline = function(str) {
                return str.replace(/<br\s*[\/]?>/gi, "\n");
        }

        var jobapplication_address_required = "false" == "true";
        var jobapplication_linkedin_required = "false" == "true";
        var jobapplication_summary_required = "false" == "true";
        var jobapplication_resume_required = "true" == "true";
        var jobapplication_coverletter_required = "true" == "true";
        var has_applied = "" == "true";

        var apply_custom_fields_errors_obj = {};
        
        Vue.component('fulljob', {
                template: "#fulljob-template",
                props: {
                        job: {
                                type: Object,
                                default: function() { return {} }
                        }
                },
                data() {
                        return {
                                // job_is_saved: false,
                                view: 'job',
                                login_required_to_apply: login_required_to_apply,
                                form: {
                                        first_name: "",
                                        last_name: "",
                                        email: "",
                                        address: "",
                                        linkedin: "",
                                        summary: brToNewline(""),
                                        resume_url: "",
                                        resume: "",
                                        resume_review: false,
                                        cover_letter: "",
                                        photo_img_url: "",
                                        apply_custom_fields: []
                                },
                                apply_custom_fields: [],
                                errors: {
                                        first_name: false,
                                        last_name: false,
                                        email: false,
                                        address: false,
                                        linkedin: false,
                                        summary: false,
                                        resume: false,
                                        cover_letter: false,
                                        apply_custom_fields: [],
                                        api_call_failed: false
                                },
                                application_success: has_applied,
                                resume_dragging: false,
                                apply_popup: {
                                        overlay: false,
                                        show: false,
                                        error: false
                                },
                                loading: false                          
                        }
                },
                // watch: { 
                //      'job.is_saved': {
                //              handler(newValue, oldValue) {
                //                      this.job_is_saved = this.job.is_saved;
                //              }
                //      }
                // },
                async mounted() {
                        // this.job_is_saved = this.job.is_saved;

                        var api_url = "/api/apply-custom-fields";
                        var cf_res = await axios({ method: 'get', url: api_url });

                        if (cf_res.error || cf_res.data.error) {
                                console.log("Error fetching apply custom fields data");
                        }
                        else {
                                // Set data in Vue obj
                                this.apply_custom_fields = cf_res.data.apply_custom_fields;
                                this.form.apply_custom_fields = cf_res.data.apply_custom_fields_obj;
                                this.errors.apply_custom_fields = cf_res.data.apply_custom_fields_errors_obj;
                                // Set as variable for re-use
                                apply_custom_fields_errors_obj = cf_res.data.apply_custom_fields_errors_obj;
                        }
                },
                computed: {
                        invalidForm() {
                                var has_errors = false;

                                for(var key in this.errors) {
                                        if (key != "apply_custom_fields") {
                                                if (this.errors[key] == true)
                                                        has_errors = true;
                                        }
                                        else {
                                                for (var k in this.errors[key]) {
                                                        if (this.errors[key][k] == true)
                                                                has_errors = true;
                                                }
                                        }
                                }

                                return has_errors;
                        }
                },
                methods: {
                        openApplyPopup(type) {
                                this.apply_popup.error = false;
                                this.apply_popup.overlay = true;
                                this.apply_popup.show = true;

                                this.resetApplyPopup();
                        },
                        closeApplyPopup() {
                                this.apply_popup.overlay = false;
                                this.apply_popup.show = false;
                        },
                        stopPropagation(e) {
                                e.stopPropagation();
                        },
                        resetApplyPopup() {
                                setTimeout(function() {
                                        $('.apply-popup .popup-inner').scrollTop(0);
                                }, 10);
                        },
                        async toggleSave(e) {
                                e.preventDefault();
                                e.stopPropagation();

                                var self = this;

                                if (user_is_logged) {
                                        self.job.is_saved = !self.job.is_saved;
                                        this.$emit('update:job', self.job);

                                        var api_url = "/api/save-job";
                                        // Send api call
                                        var jobs_res = await $.post({
                                                url: api_url, 
                                                data: { 
                                                        job_id: self.job.id, 
                                                        is_saved: self.job.is_saved 
                                                }
                                        });
                                }
                                else {
                                        this.$parent.notify("You must be logged in to your job seeker account to save jobs.");
                                }
                        },
                        applyDirect() {
                                if (this.application_success) {
                                        this.$parent.notify("You've already applied for this job");
                                        return;
                                }
                                if (!this.login_required_to_apply || (this.login_required_to_apply && user_is_logged))
                                        this.openApplyPopup();
                                else
                                        this.view = 'login';
                        },
                        async applyExternal(type, e) {
                                var self = this;

                                if (!this.login_required_to_apply || (this.login_required_to_apply && user_is_logged)) {
                                        // User is logged or no login necessary -> proceed

                                        var api_url = "/api/jobs/apply-click";
                                        await $.ajax({
                                                type: "POST",
                                                url: api_url,
                                                data: {
                                                        job_id: self.job.id,
                                                        jobboard_id: jobboard_id,
                                                        click_type: type
                                                }
                                        });
                                }
                                else {
                                        // Prevent & show login message
                                        e.preventDefault();

                                        if (this.view == 'job')
                                                this.view = 'login';
                                        else
                                                this.view = 'job';
                                }
                        },
                        clearResume() {
                                this.form.resume_url = "";
                                this.form.resume = "";
                        },
                        handleResume(e) {
                                const allowed_resume_filetypes = ["application/pdf", "application/msword", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"];
                                var file = e.target.files[0];
                                e.target.value = "";
                                if (allowed_resume_filetypes.includes(file.type)) {
                                        this.form.resume = file;
                                        this.form.resume_url = "";
                                }
                        },
                        validate() {
                                var self = this;

                                function validURL(str) {
                                        var pattern = new RegExp('^(https?:\\/\\/)'+ // protocol
                                        '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
                                        '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
                                        '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
                                        '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
                                        '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
                                        return !!pattern.test(str);
                                }

                                function validEmail(email) {
                                        var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                                        return !!re.test(String(email).toLowerCase());
                                }

                                this.errors = {
                                        first_name: false,
                                        last_name: false,
                                        email: false,
                                        address: false,
                                        linkedin: false,
                                        summary: false,
                                        resume: false,
                                        cover_letter: false,
                                        apply_custom_fields: {...apply_custom_fields_errors_obj},
                                        api_call_failed: false
                                }

                                if (!this.form.first_name)
                                        this.errors.first_name = true;

                                if (!this.form.last_name)
                                        this.errors.last_name = true;

                                if (!this.form.email || !validEmail(this.form.email))
                                        this.errors.email = true;

                                if (jobapplication_address_required && !this.form.address)
                                        this.errors.address = true;

                                if (jobapplication_linkedin_required && !this.form.linkedin)
                                        this.errors.linkedin = true;

                                if (this.form.linkedin && !validURL(this.form.linkedin))
                                        this.errors.linkedin = true;

                                if (jobapplication_summary_required && !this.form.summary)
                                        this.errors.summary = true;

                                if (jobapplication_resume_required && !this.form.resume && !this.form.resume_url)
                                        this.errors.resume = true;

                                if (jobapplication_coverletter_required && !this.form.cover_letter)
                                        this.errors.cover_letter = true;

                                // For each custom field -> custom field errors
                                for (var field of this.apply_custom_fields) {
                                        if (field.is_required && field.type != "checkbox" && !this.form.apply_custom_fields[field.slug].value)
                                                this.errors.apply_custom_fields[field.slug] = true;

                                        // Validate url
                                        if (field.validation_type == 'url' && this.form.apply_custom_fields[field.slug].value && !validURL(this.form.apply_custom_fields[field.slug].value))
                                                this.errors.apply_custom_fields[field.slug] = true;

                                        // Validate email
                                        if (field.validation_type == 'email' && this.form.apply_custom_fields[field.slug].value && !validEmail(this.form.apply_custom_fields[field.slug].value))
                                                this.errors.apply_custom_fields[field.slug] = true;
                                }
                        },
                        async submitApplication() {
                                var self = this;

                                this.validate();

                                if (!this.invalidForm) {
                                        this.loading = true;

                                        var data = new FormData();
                                        data.set('job_id', self.job.id);
                                        data.set('first_name', self.form.first_name);
                                        data.set('last_name', self.form.last_name);
                                        data.set('email', self.form.email);
                                        data.set('address', self.form.address);
                                        data.set('summary', self.form.summary);
                                        data.set('linkedin_url', self.form.linkedin);
                                        data.set('cover_letter', self.form.cover_letter);
                                        data.set('resume_url', self.form.resume_url);
                                        data.set('photo_img_url', self.form.photo_img_url);

                                        if (self.form.resume)
                                                data.append('resume', self.form.resume);

                                        data.set('resume_review', self.form.resume_review);

                                        data.set('custom_fields', JSON.stringify(self.form.apply_custom_fields));

                                        try {
                                                var api_url = "/api/jobs/apply";
                                                var res = await axios({
                                                        method: 'post',
                                                        url: api_url,
                                                        data: data,
                                                        headers: {'Content-Type': 'multipart/form-data' }
                                                });

                                                this.loading = false;

                                                if (res.error || res.data.error) {
                                                        this.errors.api_call_failed = true;
                                                        console.log(res.data.error);
                                                }
                                                else {
                                                        this.closeApplyPopup();
                                                        this.$parent.notify("Your application has been successfully submitted.");
                                                        this.application_success = true;
                                                }
                                        }
                                        catch(e) {
                                                console.log(e);
                                                this.errors.api_call_failed = true;
                                        }
                                }

                                $('.apply-popup .popup-inner').animate({ scrollTop: 0 }, 500);
                        },
                        getShareLink(job, network) {
                                var job_url = this.getJobUrl(job);

                                var remote = "";
                                if (job.is_remote)
                                        remote = "/ " + "Remote";
                                else if (job.remote_only)
                                        remote = "/ " + "Remote only";

                                var location = job.location_name ? " in " + job.location_name + remote : remote;

                                var company_name = job.company.anonymity_enabled ? "Private Employer" : job.company.name;
                                var text = company_name + " " + "is hiring a" + " " + job.title + location;

                                if (network == 'twitter') {
                                        return "https://twitter.com/intent/tweet?text=" + encodeURIComponent(text) + "&url=" + job_url;
                                }
                                else if (network == 'linkedin') {
                                        return "https://www.linkedin.com/shareArticle?mini=true&summary=" + text + "&url=" + job_url + "&source=" + "Jobbyist";
                                }
                                else if (network == 'facebook') {
                                        return "https://facebook.com/sharer/sharer.php?u=" + job_url;
                                }
                                else if (network == 'email') {
                                        var subject = encodeURIComponent(job.title);
                                        var body = encodeURIComponent(job_url);

                                        return "mailto:?subject=" + subject + "&body=" + body;
                                }
                                else if (network == 'copy') {
                                        return job_url;
                                }
                                else
                                        return "#";
                        },
                        getCompanyLink(job) {
                                return "/company/" + job.company.slug;
                        },
                        getCategoryLink(job) {
                                return "/category/" + job.category.slug;
                        },
                        getTagLink(tag) {
                                return "/tag/" + tag.slug;
                        },
                        getSeekerLoginUrl(job) {
                                return "/seeker/login" + "?next=/j/" + job.uid;
                        },
                        getJobUrl(job) {
                                var custom_domain = "jobs.jobbyist.co.za";
                                var domain_is_live = "false";

                                if (custom_domain && domain_is_live)
                                        var board_url = "https://" + "jobs.jobbyist.co.za";
                                else
                                        var board_url = "https://" + "jobbyist" + ".niceboard.co";

                                return board_url + "/j/" + job.uid;
                        },
                        getApplyUrl(job) {
                                return "/go/" + job.id;
                        },
                        getApplyEmail(job) {
                                if (job) {
                                        var subject_translation = "Applicant for {job_title} ({jobboard_name})";

                                        var subject = subject_translation.replace('{job_title}', job.title).replace('{jobboard_name}', "Jobbyist");
                                }
                                else {
                                        var subject = "Job application";                
                                }

                                return "mailto:" + job.apply_email + "?subject=" + encodeURIComponent(subject);
                        },
                        getTranslatedLabel(obj) {
                                if (!is_default_translation && obj.secondary_lang_name)
                                        return obj.secondary_lang_name;
                                else
                                        return obj.name;
                        },
                        formatSalaryTimeframe(timeframe) {
                                if (timeframe == 'annually')
                                        return "(Annually)";
                                else if (timeframe == 'monthly')
                                        return "(Monthly)";
                                else if (timeframe == 'weekly')
                                        return "(Weekly)";
                                else if (timeframe == 'daily')
                                        return "(Daily)";
                                else if (timeframe == 'hourly')
                                        return "(Hourly)";
                                else
                                        return "";
                        },
                        formatSalary(min, max, currency=null) {
                                if (!currency)
                                        var currency = jobboard_currency;
                                
                                var verbose_usd = "false" == "true";

                                return formatSalaryHelper(min, max, currency, verbose_usd);
                        }
                },
                filters: {
                        getBooleanValue(bool) {
                                var true_translation = "True";
                                var false_translation = "False";

                                return bool ? true_translation : false_translation;
                        },
                        getJobLink(job) {
                                if (!job) return "";

                                var base = "/job/";

                                if (!job.anonymity_enabled)
                                        return base + job.id + '-' + job.slug + '-' + job.company_slug;
                                else
                                        return base + job.id + '-' + job.slug;
                        },
                }
        });
  </script> 
  <script>

        var is_pro = "true" == "true";
        var is_default_translation = "true" == "true";

        var job_timeout, search_timeout, salary_timeout, backfill_timeout;
        var show_jobs_count = parseInt("30");
        var dual_pane_active = "dual-pane" == "dual-pane";
        var jobboard_currency = "ZAR";
        var backfill_enabled = "true" == 'true';
        var backfill_is_indeed = "appcast" == 'indeed';
        var backfill_merge_enabled = "true" == 'true';

        var initial_filters = {
                jobtype: "" ? "" : "all",
                category: "" ? "" : "all",
                secondary_category: "" ? "" : "all",
                company: "" ? "" : "all",
                location: "" ? "" : "all",
                country: "" ? "" : "all",
                state: "" ? "" : "all",
                city: "" ? "" : "all",
                remote_ok: "" == 'true' ? true : false,
                remote_only: "" == 'true' ? true : false,
                tags: "" ? [""] : [], // ["ui", "ux"]
                salary_timeframe: "" ? "" : "",
                salary_min: "",
                salary_max: ""
        }

        var jobs_box_count_label = "Browse {count} jobs";
        var open_jobs_newtab = "true" == 'true';

        var logged_user = "";
        var seeker_accounts_enabled = "true" == "true";

        var company_obj = "";

        var app = new Vue({
                el: '#app',
                data: {
                        currency: jobboard_currency,

                        active_section_id: "0" ? "" : "",

                        jobs: [],
                        jobs_count: 0,
                        jobs_loading: true,

                        job: {},
                        selected_job_id: "",
                        show_job_box: false,

                        jobtypes: [],
                        categories: [],
                        secondary_categories: [],
                        tags: [],
                        salaries: [],
                        countries: [],
                        cities: [],
                        states: [],
                        remote_count: 0,
                        remote_only_count: 0,

                        filters_open: false,
                        filters_overlay_open: false,
                        filters: {
                                company: initial_filters.company,
                                jobtype: initial_filters.jobtype,
                                category: initial_filters.category,
                                secondary_category: initial_filters.secondary_category,
                                tags: [...initial_filters.tags],
                                location: initial_filters.location,
                                country: initial_filters.country,
                                state: initial_filters.state,
                                city: initial_filters.city,
                                remote_ok: initial_filters.remote_ok,
                                remote_only: initial_filters.remote_only,
                                salary_timeframe: initial_filters.salary_timeframe,
                                salary_min: initial_filters.salary_min,
                                salary_max: initial_filters.salary_max,
                                keyword: "",
                                limit: show_jobs_count,
                                page: 1
                        },
                        filters_labels: {
                                jobtype: "All jobs",
                                category: "All categories",
                                secondary_category: "All categories",
                                company: "",
                                tags: "Tags",
                                location: "All locations",
                                country: "All countries",
                                state: "All states",
                                city: "All cities",
                                salary_timeframe: "Select timeframe"
                        },
                        filters_errors: {
                                salary: false
                        },

                        backfill_jobs: [],
                        backfill_jobs_count: 0,
                        backfill_jobs_loading: false,
                        backfill_merge_page: 1,

                        backfill_filters_open: false,
                        backfill_filters_overlay_open: false,
                        backfill_filters: {
                                jobtype: "all",
                                category: "all",
                                experience: "all",
                                location: "",
                                remote_ok: false,
                                keyword: "",
                                limit: show_jobs_count,
                                page: 1
                        },

                        jobalerts: {
                                jobtypes: [],
                                locations: [],
                                categories: [],
                                secondary_categories: [],

                                hide: false,
                                open: false,
                                loading: false,
                                submitted: false,
                                email: "",
                                frequency: "weekly",
                                jobtype: "all",
                                location: "all",
                                category: "all",
                                secondary_category: "all",
                                other: "",
                                error: null,
                                server_error: null,
                                email_exists: false
                        },
                        jobalerts_labels: {
                                jobtype: "All jobs",
                                category: "All categories",
                                secondary_category: "All categories",
                                location: "All locations",
                                company: ""
                        },
                        notification: {
                                show: false,
                                hide: false,
                                msg: ""
                        },
                        popup: {
                                employer: {},
                                overlay: false,
                                show: false,
                                error: false
                        },
                        company: company_obj
                },
                async mounted() {
                        // Fetch jobs (regular + backfill)
                        await this.fetchJobs();
                        
                        if (backfill_enabled)
                                await this.fetchBackfillJobs();

                        // Populate job alert options
                        await this.fetchJobAlertOptions();
                },
                watch: {
                        "filters.keyword": function(newVal, oldVal) {
                                // Debounce keyword search
                                if (backfill_merge_enabled) {
                                        this.backfill_filters.keyword = newVal;
                                }
                                var self = this;
                                clearTimeout(search_timeout);
                                search_timeout = setTimeout(async function() {
                                        await self.resetJobs();
                                }, 300);
                        },
                        "filters.jobtype": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.category": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.secondary_category": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.location": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.country": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.state": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.city": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.remote_ok": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.remote_only": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.tags": async function(newVal, oldVal) {
                                await this.resetJobs();
                        },
                        "filters.salary_min": function(newVal, oldVal) {
                                // Debounce salary search
                                var self = this;
                                clearTimeout(salary_timeout);
                                salary_timeout = setTimeout(async function() {
                                        self.validateSalary();

                                        if (!self.filters_errors.salary && self.filters.salary_timeframe)
                                                await self.resetJobs();
                                }, 300);
                        },
                        "filters.salary_max": function(newVal, oldVal) {
                                // Debounce salary search
                                var self = this;
                                clearTimeout(salary_timeout);
                                salary_timeout = setTimeout(async function() {
                                        self.validateSalary();

                                        if (!self.filters_errors.salary && self.filters.salary_timeframe)
                                                await self.resetJobs();
                                }, 300);
                        },
                        "filters.salary_timeframe": async function(newVal, oldVal) {
                                if ((this.filters.salary_min || this.filters.salary_max) && !this.filters_errors.salary)
                                        await this.resetJobs();
                        },
                        "backfill_filters.keyword": async function(newVal, oldVal) {
                                // Debounce keyword search
                                var self = this;
                                clearTimeout(backfill_timeout);
                                backfill_timeout = setTimeout(async function() {
                                        await self.resetBackfillJobs();
                                }, 300);
                        }
                        // backfill_filters: {
                        //      handler(new_filters, old_filters) {
                        //              this.scrollTop("#backfill-jobs");
                        //      },
                        //      deep: true
                        // }
                },
                computed: {
                        backfill_merge_hide_jobs() {
                                return this.backfill_merge_page > this.total_jobs_pages;
                        },
                        backfill_merge_backfill_jobs() {
                                if (this.backfill_merge_page > this.total_jobs_pages) {
                                        // Pure backfill
                                        var count = show_jobs_count;
                                } else if (this.jobs.length < show_jobs_count) {
                                        // Mixed
                                        var count = show_jobs_count - this.jobs.length;
                                } else {
                                        // Pure jobs
                                        var count = 0;
                                }
                                return this.backfill_jobs?.slice(0, count) || [];
                        },
                        // sliced_jobs() {
                        //      var jobs = [...this.jobs];

                        //      // Insert empty object for subscribe component
                        //      // if (jobs.length > 10)
                        //              // jobs.splice(15, 0, {id: 0});

                        //      return jobs.slice(0, this.show_jobs);
                        // },
                        formatted_salary_min() {
                                return this.filters.salary_min && this.filters.salary_min != "" ? parseFloat(this.filters.salary_min) : "";
                        },
                        formatted_salary_max() {
                                return this.filters.salary_max && this.filters.salary_max != "" ? parseFloat(this.filters.salary_max) : "";
                        },
                        filters_set() {
                                var filters_set = false;

                                if (this.keyword_filter_set || this.jobtype_filter_set || this.category_filter_set || this.secondary_category_filter_set || this.company_filter_set || this.location_filter_set || this.remote_filter_set || this.remoteonly_filter_set || this.tags_filter_set || this.salary_filter_set || this.filters.limit != show_jobs_count || this.filters.page != 1)
                                        filters_set = true;

                                return filters_set;
                        },
                        filters_set_count() {
                                var count = 0;

                                if (this.filters.jobtype != initial_filters.jobtype)
                                        count += 1;
                                if (this.filters.category != initial_filters.category)
                                        count += 1;
                                if (this.filters.secondary_category != initial_filters.secondary_category)
                                        count += 1;
                                if (this.filters.city != initial_filters.city)
                                        count += 1;
                                if (this.filters.state != initial_filters.state)
                                        count += 1;
                                if (this.filters.country != initial_filters.country)
                                        count += 1;
                                if (this.filters.company != initial_filters.company)
                                        count += 1;
                                if (this.filters.remote_ok != initial_filters.remote_ok)
                                        count += 1;
                                if (this.filters.remote_only != initial_filters.remote_only)
                                        count += 1;
                                if (this.filters.tags.length != 0 && initial_filters.tags.length == 0)
                                        count += 1;
                                if (this.filters.salary_min != initial_filters.salary_min || this.filters.salary_max != initial_filters.salary_max)
                                        count += 1;
                                if (this.filters.keyword != "")
                                        count += 1;

                                return count;
                        },
                        keyword_filter_set() {
                                return this.filters.keyword != "";
                        },
                        jobtype_filter_set() {
                                return this.filters.jobtype != initial_filters.jobtype;
                        },
                        category_filter_set() {
                                return this.filters.category != initial_filters.category;
                        },
                        secondary_category_filter_set() {
                                return this.filters.secondary_category != initial_filters.secondary_category;
                        },
                        tags_filter_set() {
                                return this.filters.tags.length != initial_filters.tags.length;
                        },
                        salary_filter_set() {
                                return this.filters.salary_min != initial_filters.salary_min || this.filters.salary_max != initial_filters.salary_max;
                        },
                        location_filter_set() {
                                return this.filters.city != initial_filters.city || this.filters.state != initial_filters.state || this.filters.country != initial_filters.country;
                        },
                        remote_filter_set() {
                                return this.filters.remote_ok != initial_filters.remote_ok;
                        },
                        remoteonly_filter_set() {
                                return this.filters.remote_only != initial_filters.remote_only;
                        },
                        company_filter_set() {
                                return this.filters.company != initial_filters.company;
                        },
                        job_target() {
                                if (open_jobs_newtab)
                                        return "_blank";
                                else
                                        return false;
                        },
                        total_jobs_count() {
                                if (backfill_enabled && backfill_merge_enabled) {
                                        return this.jobs_count + this.backfill_jobs_count;
                                } 
                                else {
                                        return this.jobs_count;
                                }
                        },
                        total_jobs_pages() {
                                if (this.jobs_count)
                                        return Math.ceil(this.jobs_count / this.filters.limit);
                                else
                                        return 1;
                        },
                        total_backfill_jobs_pages() {
                                if (this.backfill_jobs_count)
                                        return Math.ceil(this.backfill_jobs_count / this.filters.limit);
                                else
                                        return 1;
                        },
                        total_backfill_merge_pages() {
                                if (this.jobs_count || this.backfill_jobs_count)
                                        return Math.ceil(
                                                (this.jobs_count + this.backfill_jobs_count) / this.filters.limit
                                        );
                                else
                                        return 1;
                        },
                        pagination_label() {
                                var translation = "Page {current_page} of {total_pages}";

                                if (backfill_enabled && backfill_merge_enabled) {
                                        var current_page = this.backfill_merge_page;
                                        var total_pages = this.total_backfill_merge_pages;
                                } 
                                else {
                                        var current_page = this.filters.page;
                                        var total_pages = this.total_jobs_pages;
                                }

                                var label = translation.replace('{current_page}', current_page).replace('{total_pages}', total_pages);

                                return label;
                        },
                        backfill_pagination_label() {
                                var translation = "Page {current_page} of {total_pages}";

                                var current_page = this.backfill_filters.page;
                                var total_pages = this.formatNumber(this.total_backfill_jobs_pages);

                                var label = translation.replace('{current_page}', current_page).replace('{total_pages}', total_pages);

                                return label;
                        },
                        backfill_filters_set_count() {
                                var count = 0;

                                if (this.backfill_filters.keyword != "")
                                        count += 1;

                                return count;
                        },
                        hasNext() {
                                if (backfill_enabled && backfill_merge_enabled)
                                        return this.backfill_merge_page < this.total_backfill_merge_pages;
                                else
                                        return this.filters.page < this.total_jobs_pages;
                        },
                        hasPrev() {
                                if (backfill_enabled && backfill_merge_enabled)
                                        return this.backfill_merge_page > 1;
                                else
                                        return this.filters.page > 1;
                        },
                        hasNextBackfill() {
                                return this.backfill_filters.page < this.total_backfill_jobs_pages;
                        },
                        hasPrevBackfill() {
                                return this.backfill_filters.page > 1;
                        },
                        // filtered_backfill_jobs() {
                        //      var filtered_jobs = this.backfill_jobs && this.backfill_jobs.length > 0 ? [...this.backfill_jobs] : [];

                        //      var jobtype_filter = this.backfill_filters.jobtype;
                        //      var category_filter = this.backfill_filters.category;
                        //      var location_filter = this.backfill_filters.location;
                        //      var remote_filter = this.backfill_filters.remote_ok;
                        //      var keyword_filter = this.backfill_filters.keyword;

                        //      // Apply experience filter if select is not default
                        //      // if (experience_filter != "all") {
                        //      //      filtered_jobs = filtered_jobs.filter(function(job) {
                        //      //              return job.experience.toLowerCase() === experience_filter;
                        //      //      });
                        //      // }

                        //      // // Apply category filter if select is not default
                        //      // if (category_filter != "all") {
                        //      //      filtered_jobs = filtered_jobs.filter(function(job) {
                        //      //              return job.category && job.category.slug === category_filter;
                        //      //      });
                        //      // }

                        //      // // Apply jobtype filter if select is not default
                        //      // if (jobtype_filter != 'all') {
                        //      //      filtered_jobs = filtered_jobs.filter(function(job) {
                        //      //              return job.jobtype_slug === jobtype_filter;
                        //      //      });
                        //      // }

                        //      // // Apply location filter if field is not empty
                        //      // if (location_filter) {
                        //      //      filtered_jobs = filtered_jobs.filter(function(job) {
                        //      //              return job.location_name.toLowerCase().includes(location_filter.toLowerCase());
                        //      //      });
                        //      // }

                        //      // // Apply remote filter if select is not default
                        //      // if (remote_filter != false) {
                        //      //      filtered_jobs = filtered_jobs.filter(function(job) {
                        //      //              return job.is_remote == remote_filter;
                        //      //      });
                        //      // }

                        //      // Apply keyword filter if field is not empty
                        //      if (keyword_filter) {
                        //              filtered_jobs = filtered_jobs.filter(function(job) {
                        //                      return job.title.toLowerCase().includes(keyword_filter.toLowerCase()) || job.company.toLowerCase().includes(keyword_filter.toLowerCase());
                        //              });
                        //      }

                        //      // this.scrollTop("#backfill-jobs");

                        //      return filtered_jobs;
                        // },
                        filters_tags_array() {
                                if (this.filters.tags == "")
                                        return [];
                                else
                                        return this.filters.tags.split(', ');
                        }
                },
                filters: {
                        getJobLink(job) {
                                if (!job) return "";

                                var base = "/job/";

                                if (!job.anonymity_enabled)
                                        return base + job.id + '-' + job.slug + '-' + job.company_slug;
                                else
                                        return base + job.id + '-' + job.slug;
                        },
                        getCompanyLink(job) {
                                if (!job) return "";

                                var base = "/company/";
                                return base + job.company_slug;
                        }
                },
                methods: {
                        notify(msg) {
                                var self = this;
                                self.notification.msg = msg;
                                self.notification.show = true;

                                setTimeout(function() {
                                        self.notification.hide = true;
                                        
                                        setTimeout(function() {
                                                self.notification.show = false;
                                                self.notification.hide = false;
                                        }, 1000)
                                }, 2000);
                        },
                        getTranslatedLabel(obj) {
                                if (!is_default_translation && obj.secondary_lang_name)
                                        return obj.secondary_lang_name;
                                else
                                        return obj.name;
                        },
                        isNumber(e) {
                                e = (e) ? e : window.event;
                                var charCode = (e.which) ? e.which : e.keyCode;

                                if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46)
                                        e.preventDefault();
                                else
                                        return true;
                        },
                        validateSalary() {
                                if (this.formatted_salary_min != "" && this.formatted_salary_max != "" && (this.formatted_salary_min > this.formatted_salary_max)) {
                                        this.filters_errors.salary = true;
                                }
                                else {
                                        this.filters_errors.salary = false;
                                }
                        },
                        includesTag(tag) {
                                var index = this.filters.tags.indexOf(tag.slug);
                                return index !== -1;
                        },
                        setTag(tag) {
                                var index = this.filters.tags.indexOf(tag.slug);
                                if (index !== -1)
                                        this.filters.tags.splice(index, 1);
                                else
                                        this.filters.tags.push(tag.slug);
                        },
                        setActiveSection(section_id) {
                                this.active_section_id = section_id;
                        },
                        setSelectLabel(filter_val, e) {
                                if (e.target.options.selectedIndex > -1) {
                                        var text = e.target.options[e.target.options.selectedIndex].text;

                                        this.filters_labels[filter_val] = text;
                                }
                        },
                        setSelectJobAlertsLabel(filter_val, e) {
                                if (e.target.options.selectedIndex > -1) {
                                        var text = e.target.options[e.target.options.selectedIndex].text;

                                        this.jobalerts_labels[filter_val] = text;
                                }
                        },
                        toggleSelect(selector) {
                                // $(selector).toggleClass('hide');
                        },
                        async fetchJobAlertOptions() {
                                var self = this;
                                var api_url = "/api/jobalerts-options";

                                var res = await $.get({
                                        url: api_url
                                });

                                this.jobalerts.jobtypes = res.jobtypes;
                                this.jobalerts.categories = res.categories;
                                this.jobalerts.secondary_categories = res.secondary_categories;
                                this.jobalerts.locations = res.locations;
                        },
                        setActiveJob(job, e) {
                                var is_desktop = $(window).width() > 1160;

                                if (dual_pane_active && is_desktop) {
                                        e.preventDefault();
                                        e.stopPropagation();

                                        this.job = job;
                                        this.selected_job_id = job.id;

                                        // scrolltop
                                        document.getElementById('job-pane').scrollTop = 0;
                                }
                        },
                        async saveJob(job, e) {
                                e.preventDefault();
                                e.stopPropagation();

                                if (logged_user) {
                                        job.is_saved = !job.is_saved;

                                        var api_url = "/api/save-job";
                                        // Send api call
                                        var jobs_res = await $.post({
                                                url: api_url, 
                                                data: { 
                                                        job_id: job.id, 
                                                        is_saved: job.is_saved 
                                                }
                                        });
                                }
                                else {
                                        this.notify("You must be logged in to your job seeker account to save jobs.");
                                }
                        },
                        async resetJobs() {
                                if (backfill_merge_enabled) {
                                        this.backfill_merge_page = 1;
                                }
                                this.scrollTop("#jobs");
                                this.filters.page = 1;
                                await this.fetchJobs();
                        },
                        async fetchJobs() {
                                var self = this;
                                this.jobs_loading = true;

                                // Format tags array as string
                                var data_obj = {...this.filters};
                                data_obj.tags = JSON.stringify(data_obj.tags);

                                var api_url = "/api/jobs";
                                // Fetch jobs with appropriate filters
                                var jobs_res = await $.get({
                                        url: api_url, 
                                        data: data_obj
                                });

                                this.jobs = jobs_res.jobs;
                                this.jobs_count = jobs_res.count;

                                // Populate job pane
                                if (dual_pane_active && this.jobs.length) {
                                        this.show_job_box = true;
                                        this.selected_job_id = this.jobs[0].id;
                                        this.job = this.jobs[0];        
                                }
                                else {
                                        this.show_job_box = false;
                                }

                                this.jobtypes = jobs_res.jobtypes;
                                this.categories = jobs_res.categories;
                                this.secondary_categories = jobs_res.secondary_categories;
                                this.tags = jobs_res.tags;
                                this.salaries = jobs_res.salaries;

                                this.countries = jobs_res.countries;
                                this.states = jobs_res.states;
                                this.cities = jobs_res.cities;
                                this.remote_count = jobs_res.remote_count;
                                this.remote_only_count = jobs_res.remote_only_count;

                                // Reset something if count is 0

                                this.jobs_loading = false;
                        },
                        async resetBackfillJobs() {
                                if (backfill_merge_enabled) {
                                        this.scrollTop("#jobs");
                                } else {
                                        this.scrollTop("#backfill-jobs");
                                }
                                this.backfill_filters.page = 1;
                                await this.fetchBackfillJobs();
                        },
                        async fetchBackfillJobs() {
                                this.backfill_jobs_loading = true;

                                var first_time_load = this.backfill_jobs_count = 0;
                                var api_url = "/api/backfill/jobs";
                                
                                // Fetch backfill jobs
                                var backfill_jobs_res = await $.get({
                                        url: api_url,
                                        data: this.backfill_filters
                                });

                                this.backfill_jobs_loading = false;
                                this.backfill_jobs_count = backfill_jobs_res.count || 0;
                                this.backfill_jobs = backfill_jobs_res.jobs || [];
                        },
                        hoverJob(job) {
                                job.hover = true;
                        },
                        unhoverJob(job) {
                                job_timeout = setTimeout(function() { 
                                        job.hover = false 
                                }, 500);
                        },
                        hoverCompanyCard() {
                                clearTimeout(job_timeout);
                        },
                        formatSalaryTimeframe(timeframe) {
                                if (timeframe == 'annually')
                                        return "(Annually)";
                                else if (timeframe == 'monthly')
                                        return "(Monthly)";
                                else if (timeframe == 'weekly')
                                        return "(Weekly)";
                                else if (timeframe == 'daily')
                                        return "(Daily)";
                                else if (timeframe == 'hourly')
                                        return "(Hourly)";
                                else
                                        return "";
                        },
                        formatSalary(min, max, currency=null) {
                                if (!currency)
                                        var currency = jobboard_currency;
                                
                                var verbose_usd = "false" == "true";

                                return formatSalaryHelper(min, max, currency, verbose_usd);
                        },
                        formatNumber(num) {
                                function numberWithCommas(x) {
                                    return abbreviateNumber(x).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",").replace('.00', '');
                                }

                                return numberWithCommas(num);
                        },
                        clearFilters() {
                                this.filters = {
                                        jobtype: initial_filters.jobtype,
                                        category: initial_filters.category,
                                        secondary_category: initial_filters.secondary_category,
                                        company: initial_filters.company,
                                        location: initial_filters.location,
                                        country: initial_filters.country,
                                        state: initial_filters.state,
                                        city: initial_filters.city,
                                        remote_ok: initial_filters.remote_ok,
                                        remote_only: initial_filters.remote_only,
                                        tags: [...initial_filters.tags],
                                        salary_timeframe: initial_filters.salary_timeframe,
                                        salary_min: initial_filters.salary_min,
                                        salary_max: initial_filters.salary_max,
                                        keyword: "",
                                        limit: show_jobs_count,
                                        page: 1
                                };

                                this.filters_labels = {
                                        jobtype: "All jobs",
                                        category: "All categories",
                                        secondary_category: "All categories",
                                        company: "",
                                        tags: "Tags",
                                        location: "All locations",
                                        country: "All countries",
                                        state: "All states",
                                        city: "All cities",
                                        salary_timeframe: "Select timeframe"
                                };
                        },
                        async nextPage() {
                                if (!backfill_enabled) {
                                        return this.nextPageJobs();
                                }
                                else {
                                        if (!backfill_merge_enabled) {
                                                return this.nextPageJobs();
                                        }
                                        else {
                                                this.backfill_merge_page += 1;
                                                if (this.backfill_merge_page > this.total_jobs_pages) {
                                                        // Pure backfill
                                                        this.backfill_filters.page += 1;
                                                        this.scrollTop("#jobs");
                                                        await this.fetchBackfillJobs();
                                                } 
                                                else if (this.jobs.length < show_jobs_count) {
                                                        // Mixed
                                                        this.filters.page += 1;
                                                        this.backfill_filters.page += 1;
                                                        this.scrollTop("#jobs");
                                                        await Promise.all([
                                                                this.fetchBackfillJobs(),
                                                                this.fetchJobs()
                                                        ]);
                                                }
                                                else {
                                                        // Regular
                                                        return this.nextPageJobs();
                                                }
                                        }                                       
                                }
                        },
                        async prevPage() {
                                if (!backfill_enabled) {
                                        return this.prevPageJobs();
                                }
                                else {
                                        if (!backfill_merge_enabled) {
                                                return this.prevPageJobs();
                                        }
                                        else {
                                                const current_page = this.backfill_merge_page;
                                                this.backfill_merge_page -= 1;
                                                if (current_page > this.total_jobs_pages) { 
                                                        // current is pure backfill, so previous is either regular or mixed
                                                        // in either case, the previous page will be the last jobs page (no need to decrease it)
                                                        this.scrollTop("#jobs");
                                                        if (this.backfill_filters.page > 1) {
                                                                this.backfill_filters.page -= 1;
                                                                await this.fetchBackfillJobs();
                                                        }
                                                }
                                                else {
                                                        // current is either regular or mixed
                                                        this.scrollTop("#jobs");
                                                        if (this.filters.page > 1)  {
                                                                this.filters.page -= 1;
                                                                await this.fetchJobs();
                                                        }
                                                }
                                        }                                       
                                }                               
                        },
                        async nextPageJobs() {
                                this.filters.page += 1;
                                this.scrollTop("#jobs");
                                await this.fetchJobs();
                        },
                        async prevPageJobs() {
                                this.filters.page -= 1;
                                this.scrollTop("#jobs");
                                await this.fetchJobs();
                        },
                        async nextPageBackfill() {
                                this.backfill_filters.page += 1;
                                this.scrollTop("#backfill-jobs");
                                await this.fetchBackfillJobs();
                        },
                        async prevPageBackfill() {
                                this.backfill_filters.page -= 1;
                                this.scrollTop("#backfill-jobs");
                                await this.fetchBackfillJobs();
                        },
                        clearBackfillFilters() {
                                this.backfill_filters = {
                                        jobtype: "all",
                                        category: "all",
                                        experience: "all",
                                        location: "",
                                        remote_ok: false,
                                        keyword: ""
                                }

                                this.show_jobs_backfill = 10;
                                this.closeBackfillFilters();
                        },
                        loadMoreJobsBackfill() {
                                this.show_jobs_backfill = this.show_jobs_backfill + 30;
                        },
                        scrollTop(element) {
                                // if (document.body.scrollTop != 0)
                                if (window.scrollY != 0) {
                                        var offset_top = $(element).offset().top;
                                        // var offset_top = $(element)[0].offsetTop;

                                        setTimeout(function() {
                                                $('html, body').animate({
                                                        scrollTop: offset_top
                                                }, 500);
                                        }, 100);
                                }
                        },
                        async submitJobAlert(e) {
                                var self = this;
                                e.preventDefault();
                                // Reset state
                                this.jobalerts.loading = false;
                                this.jobalerts.submitted = false;
                                this.jobalerts.error = false;
                                this.jobalerts.server_error = null;

                                var email = this.jobalerts.email;
                                var email_regex = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

                                // If empty or is not email
                                if (!email || !email_regex.test(email) || this.jobalerts.other != '') {
                                        this.jobalerts.error = true;
                                }
                                else {
                                        self.jobalerts.loading = true;

                                        var api_url = "/api/jobalerts";
                                        $.ajax({
                                                type: "POST",
                                                url: api_url,
                                                data: {
                                                        email: self.jobalerts.email, 
                                                        frequency: self.jobalerts.frequency,
                                                        jobtype: self.jobalerts.jobtype,
                                                        location: self.jobalerts.location,
                                                        category: self.jobalerts.category,
                                                        secondary_category: self.jobalerts.secondary_category
                                                },
                                                success: function(res) {
                                                        self.jobalerts.submitted = true;
                                                        self.jobalerts.open = false;

                                                        if (res.error)
                                                                self.jobalerts.server_error = true;
                                                        else
                                                                self.jobalerts.email_exists = res.email_exists ? true : false;
                                                        
                                                        self.jobalerts.email = "";
                                                        self.jobalerts.loading = false;
                                                }
                                        });
                                }
                        },
                        openFilters() {
                                this.filters_overlay_open = true;
                                this.filters_open = true;
                        },
                        closeFilters() {
                                this.filters_overlay_open = false;
                                this.filters_open = false;
                        },
                        openBackfillFilters() {
                                this.backfill_filters_overlay_open = true;
                                this.backfill_filters_open = true;
                        },
                        closeBackfillFilters() {
                                this.backfill_filters_overlay_open = false;
                                this.backfill_filters_open = false;
                        },
                        stopPropagation(e) {
                                e.stopPropagation();
                        },
                        openPopup(type) {
                                this.popup.error = false;
                                this.popup.overlay = true;
                                this.popup.show = true;

                                this.resetPopup();
                        },
                        closePopup() {
                                this.popup.overlay = false;
                                this.popup.show = false;
                        },
                        resetPopup() {
                                setTimeout(function() {
                                        $('.popup').scrollTop(0);
                                }, 50);
                        },
                        viewFullDescription() {
                                $('.company-description').removeClass('long');
                        },
                        isEmpty(obj) {
                                for(var i in obj){
                                        if (obj.hasOwnProperty(i))
                                                return false;
                                }
                                return true;
                        }
                }
        });
  </script>
  <footer>
    <div class="inner cf">
      <ul id="footer-info">
        <li class="footer-title">
          <h6>Jobbyist</h6>
        </li>
        <li class="email">
          <a href="mailto:info@tlean.co.za">Contact us</a>
        </li>
        <li>
          <a href="/tos">Terms Of Service</a>
        </li>
        <li>
          <a href="/privacy">Privacy Policy</a>
        </li>
        <div class="share-links"></div>
        <li class="powered-by">
          <span class="line1">Powered by</span> <img src=
          "https://cdn.niceboard.co/static-app/img/niceboard-logo.png"
          alt="Niceboard logo" title="Niceboard"> <a href=
          "https://niceboard.co?utm_source=jobbyist" target=
          "_blank">Job board software</a>
        </li>
      </ul>
      <ul id="footer-links">
        <li class="footer-title">
          <h6>Menu</h6>
        </li>
        <li>
          <a href="/">Jobs</a>
        </li>
        <li>
          <a href="/companies">Companies</a>
        </li>
        <li>
          <a href="/talent">Talent</a>
        </li>
        <li class="separated">
          <a class="btn medium footer-btn" href="/post">Post a
          job</a>
        </li>
      </ul>
      <ul id="footer-browseby">
        <li class="footer-title">
          <h6>Browse Jobs By</h6>
        </li>
        <li>
          <a href="/companies">Companies</a>
        </li>
        <li>
          <a href="/places">Locations</a>
        </li>
        <li>
          <a href="/categories">Categories</a>
        </li>
      </ul>
      <ul id="footer-employers">
        <li class="footer-title">
          <h6>Employers</h6>
        </li>
        <li>
          <a href="/employer/login">Log in</a>
        </li>
        <li>
          <a href="/employer/signup">Sign up</a>
        </li>
      </ul>
      <ul class="separated" id="footer-jobseekers">
        <li class="footer-title">
          <h6>Job Seekers</h6>
        </li>
        <li>
          <a href="/seeker/login">Log in</a>
        </li>
        <li>
          <a href="/seeker/signup">Sign up</a>
        </li>
      </ul>
    </div>
  </footer>
  <div class="cookie-popup hide">
    <p>We use cookies to improve your experience. By using our
    site, you agree to our <a href="/tos">Cookie
    Policy</a>.</p><button type="button">Accept</button>
  </div>
</body>
</html>
